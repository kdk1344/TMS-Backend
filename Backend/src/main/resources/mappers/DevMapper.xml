<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- Dev-mapper.xml -->
<mapper namespace="com.tms.backend.mapper.DevMapper">
    <select id="searchDevProgress" parameterType="map" resultType="devProgress">
	    SELECT 
	        SEQ, MAJOR_CATEGORY AS majorCategory, SUB_CATEGORY AS subCategory, MINOR_CATEGORY AS minorCategory,
    		PROGRAM_DETAIL_TYPE AS programDetailType, PROGRAM_TYPE AS programType, PROGRAM_ID AS programId, 
    		PROGRAM_NAME AS programName, CLASS_NAME AS className, SCREEN_ID AS screenId, SCREEN_NAME AS screenName,
			SCREEN_MENU_PATH AS screenMenuPath, PRIORITY, DIFFICULTY, ESTIMATED_EFFORT AS estimatedEffort,
   			REG_STATUS AS regStatus, REQ_ID AS reqId, DELETION_HANDLER AS deletionHandler, DELETION_DATE AS deletionDate,
  			DELETION_REASON AS deletionReason, DEVELOPER, PLANNED_START_DATE AS plannedStartDate,
  			PLANNED_END_DATE AS plannedEndDate, ACTUAL_START_DATE AS actualStartDate, ACTUAL_END_DATE AS actualEndDate,
    		DEV_PROG_ATTACHMENT AS devProgAttachment, PL,PL_TEST_SCD_DATE AS plTestScdDate, PL_TEST_CMP_DATE AS plTestCmpDate,
    		PL_TEST_RESULT AS plTestResult, PL_TEST_NOTES AS plTestNotes, IT_MGR AS itMgr, IT_TEST_DATE AS itTestDate,
		    IT_CONFIRM_DATE AS itConfirmDate, IT_TEST_RESULT AS itTestResult, IT_TEST_NOTES AS itTestNotes,
    		BUSI_MGR AS busiMgr, BUSI_TEST_DATE AS busiTestDate, BUSI_CONFIRM_DATE AS busiConfirmDate,
    		BUSI_TEST_RESULT AS busiTestResult, BUSI_TEST_NOTES AS busiTestNotes, THIRD_PARTY_TEST_MGR AS thirdPartyTestMgr,
		    THIRD_PARTY_TEST_DATE AS thirdPartyTestDate, THIRD_PARTY_CONFIRM_DATE AS thirdPartyConfirmDate,
   			THIRD_TEST_RESULT AS thirdTestResult, THIRD_PARTY_TEST_NOTES AS thirdPartyTestNotes, DEV_STATUS AS devStatus,
		    INIT_REG_DATE AS initRegDate, INIT_REGISTRAR AS initRegistrar, LAST_MODIFIED_DATE AS lastModifiedDate,
		    LAST_MODIFIER AS lastModifier
	    FROM DEV_PROGRESS
	    WHERE 1=1
	    <if test="majorCategory != null and majorCategory != ''">
	        AND MAJOR_CATEGORY = #{majorCategory}
	    </if>
	    <if test="subCategory != null and subCategory != ''">
	        AND SUB_CATEGORY = #{subCategory}
	    </if>
	    <if test="programType != null and programType != ''">
	        AND PROGRAM_TYPE = #{programType}
	    </if>
	    <if test="programId != null and programId != ''">
	        AND PROGRAM_ID LIKE CONCAT('%', #{programId}, '%')
	    </if>
	    <if test="programName != null and programName != ''">
	        AND PROGRAM_NAME LIKE CONCAT('%', #{programName}, '%')
	    </if>
	    <if test="regStatus != null and regStatus != ''">
	        AND REG_STATUS = #{regStatus}
	    </if>
	    <if test="developer != null and developer != ''">
	        AND DEVELOPER = #{developer}
	    </if>
	    <if test="devStatus != null and devStatus != ''">
	        AND DEV_STATUS = #{devStatus}
	    </if>
	    <if test="actualStartDate != null and actualEndDate != null">
	        AND ACTUAL_START_DATE BETWEEN #{actualStartDate} AND #{actualEndDate}
	    </if>
	    <if test="pl != null and pl != ''">
	        AND PL = #{pl}
	    </if>
	    <if test="thirdPartyTestMgr != null and thirdPartyTestMgr != ''">
	        AND THIRD_PARTY_TEST_MGR = #{thirdPartyTestMgr}
	    </if>
	    <if test="ItMgr != null and ItMgr != ''">
	        AND IT_MGR = #{ItMgr}
	    </if>
	    <if test="BusiMgr != null and BusiMgr != ''">
	        AND BUSI_MGR = #{BusiMgr}
	    </if>
	    LIMIT #{offset}, #{size}
	</select>
	
	<select id="getTotalDevProgressCount" parameterType="map" resultType="int">
	    SELECT COUNT(*)
	    FROM DEV_PROGRESS
	    WHERE 1=1
	    <if test="majorCategory != null and majorCategory != ''">
	        AND MAJOR_CATEGORY = #{majorCategory}
	    </if>
	    <if test="subCategory != null and subCategory != ''">
	        AND SUB_CATEGORY = #{subCategory}
	    </if>
	    <if test="programType != null and programType != ''">
	        AND PROGRAM_TYPE = #{programType}
	    </if>
	    <if test="programId != null and programId != ''">
	        AND PROGRAM_ID LIKE CONCAT('%', #{programId}, '%')
	    </if>
	    <if test="programName != null and programName != ''">
	        AND PROGRAM_NAME LIKE CONCAT('%', #{programName}, '%')
	    </if>
	    <if test="regStatus != null and regStatus != ''">
	        AND REG_STATUS = #{regStatus}
	    </if>
	    <if test="developer != null and developer != ''">
	        AND DEVELOPER = #{developer}
	    </if>
	    <if test="devStatus != null and devStatus != ''">
	        AND DEV_STATUS = #{devStatus}
	    </if>
	    <if test="actualStartDate != null and actualEndDate != null">
	        AND ACTUAL_START_DATE BETWEEN #{actualStartDate} AND #{actualEndDate}
	    </if>
	    <if test="pl != null and pl != ''">
	        AND PL = #{pl}
	    </if>
	    <if test="thirdPartyTestMgr != null and thirdPartyTestMgr != ''">
	        AND THIRD_PARTY_TEST_MGR = #{thirdPartyTestMgr}
	    </if>
	    <if test="ItMgr != null and ItMgr != ''">
	        AND IT_MGR = #{ItMgr}
	    </if>
	    <if test="BusiMgr != null and BusiMgr != ''">
	        AND BUSI_MGR = #{BusiMgr}
	    </if>
	</select>
	
	<delete id="deleteCommonCode" parameterType="String">
		DELETE FROM DEV_PROGRESS WHERE SEQ = #{seq}
	</delete>

	
</mapper>